<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Document</title>
   <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">


  <link rel="stylesheet" href="../css/styles.css">
  <link rel="stylesheet" href="../css/about.css">
   <script src="../js/notifications.js" defer></script>
</head>
<body>
   <div id="header"></div>
      
    <!-- Hero Section -->
  <section class="hero-section" style="margin-top: 80px; background-image: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('../images/about_banner.png'); background-size: cover; background-position: center; min-height: 400px; display: flex; align-items: center;">
        <div class="container">
            <div class="row align-items-center justify-content-center text-center" id="hero-container">
                <div class="col-lg-8">
                    <h1>Loading...</h1>
                    <p class="lead">Please wait while we fetch the latest updates.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Mission Section -->
    <section class="mission-section" id="mission">
        <div class="container">
            <div class="section-header fade-in">
                <h2>Our Mission & Vision</h2>
                <p>Empowering citizens with secure digital identities for a connected future</p>
            </div>
            <div class="row g-4">
                <div class="col-md-4 fade-in">
                    <div class="mission-card">
                        <div class="mission-icon">
                            <i class="fas fa-bullseye"></i>
                        </div>
                        <h3>Our Mission</h3>
                        <p>To provide every citizen with a secure, accessible, and efficient digital identity platform that simplifies government services and protects personal information.</p>
                    </div>
                </div>
                <div class="col-md-4 fade-in">
                    <div class="mission-card">
                        <div class="mission-icon">
                            <i class="fas fa-eye"></i>
                        </div>
                        <h3>Our Vision</h3>
                        <p>A future where digital identity enables seamless access to essential services, fostering trust, transparency, and inclusivity across all communities.</p>
                    </div>
                </div>
                <div class="col-md-4 fade-in">
                    <div class="mission-card">
                        <div class="mission-icon">
                            <i class="fas fa-heart"></i>
                        </div>
                        <h3>Our Values</h3>
                        <p>Security, transparency, accessibility, and innovation drive everything we do. We prioritize citizen privacy and data protection above all else.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Features Section -->
  <section class="features-section py-5">
        <div class="container">
            <div class="section-header fade-in">
                <h2>Our Features</h2>
                <p>Built with the latest technology for your security</p>
            </div>
            <div class="row g-4" id="features-container">
                <!-- FEATURES LOADED BY JS -->
            </div>
        </div>
    </section>

    <!-- Stats Section -->
    <section class="stats-section py-5 bg-light">
        <div class="container">
            <div class="section-header fade-in">
                <h2>Our Progress</h2>
                <p>Making a real impact across the nation</p>
            </div>
            <div class="row justify-content-center g-4">
                <!-- STATS LOADED BY JS -->
            </div>
        </div>
    </section>

    <!-- Timeline Section -->
    <section class="timeline-section">
        <div class="container">
            <div class="section-header fade-in">
                <h2>Our Journey</h2>
                <p>From concept to nationwide implementation</p>
            </div>
            <div class="timeline">
                <div class="timeline-item fade-in">
                    <div class="timeline-dot"></div>
                    <div class="timeline-content">
                        <h4>2023 - Project Initiation</h4>
                        <p>Government approved the National Digital Identity initiative to modernize citizen registration and streamline public services.</p>
                    </div>
                </div>
                <div class="timeline-item fade-in">
                    <div class="timeline-dot"></div>
                    <div class="timeline-content">
                        <h4>2024 - Development Phase</h4>
                        <p>Built the platform with cutting-edge security features, REST API architecture, and user-friendly interfaces for citizens and officials.</p>
                    </div>
                </div>
                <div class="timeline-item fade-in">
                    <div class="timeline-dot"></div>
                    <div class="timeline-content">
                        <h4>2025 - Pilot Launch</h4>
                        <p>Successfully launched pilot program in 5 regions, registering over 50,000 citizens with 98% satisfaction rate.</p>
                    </div>
                </div>
                <div class="timeline-item fade-in">
                    <div class="timeline-dot"></div>
                    <div class="timeline-content">
                        <h4>Future - Nationwide Expansion</h4>
                        <p>Rolling out to all regions with plans to integrate healthcare, tax, voting, and other essential government services.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Team Section -->
     <section class="team-section py-5">
        <div class="container">
            <div class="section-header fade-in">
                <h2>Meet Our Team</h2>
                <p>The experts behind the platform</p>
            </div>
            <div class="row g-4" id="team-container">
                <!-- TEAM LOADED BY JS -->
            </div>
        </div>
    </section>

    <!-- CTA Section -->
    <section class="cta-section" id="contact">
        <div class="container">
            <h2 class="display-4 mb-4 fade-in">Ready to Get Started?</h2>
            <p class="lead mb-4 fade-in">Join thousands of citizens who have already registered for their National Digital Identity</p>
            <div class="fade-in">
                <button class="btn btn-lg btn-primary me-3 mb-3" id="register-btn">
                    <i class="fas fa-user-plus me-2"></i>Register Now
                </button>
                <button class="btn btn-lg btn-outline-light mb-3" id="contact-btn">
                    <i class="fas fa-phone me-2"></i>Contact Support
                </button>
            </div>
        </div>
    </section>

   <div id="footer"></div>
   <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
   <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>
   <script src="../js/index.js"></script>

   <script>
        // Load header and footer
        fetch('../components/header.html')
            .then(response => response.text())
            .then(data => {
                document.getElementById('header').innerHTML = data;
            });
        
        fetch('../components/footer.html')
            .then(response => response.text())
            .then(data => {
                document.getElementById('footer').innerHTML = data;
            });


        $(document).ready(function() {
            // Load About Page Data
            $.ajax({
                url: "/api/about",
                method: "GET",
                dataType: "json",
                success: function (data) {
                    loadHero(data.hero);
                    loadFeatures(data.features);
                    loadTeam(data.team);
                },
                error: function(err) {
                    console.error("Error loading about data:", err);
                    $(".hero-section h1").text("Building a Digital Nation");
                    $(".hero-section p.lead").text("Secure, efficient, and inclusive identity for every citizen.");
                }
            });

            // Load Stats
            $.ajax({
                url: "/api/stats",
                method: "GET",
                dataType: "json",
                success: function (stats) {
                    loadStats(stats);
                    setTimeout(checkVisible, 100);
                },
                error: function(err) {
                    console.error("Error loading stats:", err);
                }
            });
        });

        /* ------------------ HERO SECTION ------------------ */
        function loadHero(hero) {
            const heroHtml = `
                <div class="col-lg-8 fade-in">
                    <h1>${hero.title}</h1>
                    <p class="lead">${hero.subtitle}</p>
                </div>
            `;
            $("#hero-container").html(heroHtml);
        }

        /* ------------------ FEATURES ------------------ */
        function loadFeatures(features) {
            $("#features-container").html("");

            features.forEach(f => {
                $("#features-container").append(`
                    <div class="col-md-3 fade-in">
                        <div class="feature-box">
                            <div class="feature-icon"><i class="fas ${f.icon}"></i></div>
                            <h4>${f.title}</h4>
                            <p>${f.text}</p>
                        </div>
                    </div>
                `);
            });
        }

        /* ------------------ TEAM SECTION ------------------ */
        function loadTeam(team) {
            $("#team-container").html("");

            team.forEach(t => {
                const photoHtml = t.photo 
                    ? `<img src="${t.photo}" alt="${t.name}" class="img-fluid">`
                    : `<i class="fas fa-user"></i>`;

                $("#team-container").append(`
                    <div class="col-md-4 fade-in">
                        <div class="team-card">
                            <div class="team-image">${photoHtml}</div>
                            <div class="team-info">
                                <h4>${t.name}</h4>
                                <p class="text-muted">${t.role}</p>
                                <p>${t.description}</p>
                            </div>
                        </div>
                    </div>
                `);
            });
        }

        /* ------------------ STATS FROM DB ------------------ */
        function loadStats(stats) {
            const statsArray = [
                { target: stats.citizensRegistered, label: "Citizens Registered" },
                { target: stats.regionalOffices, label: "Regional Offices" },
                { target: stats.satisfactionRate, label: "Satisfaction Rate %" },
                { target: stats.supportHours, label: "Hours Support" }
            ];

            $(".stats-section .row").html("");

            statsArray.forEach(s => {
                $(".stats-section .row").append(`
                    <div class="col-md-3 fade-in">
                        <div class="stat-box">
                            <div class="stat-number counter" data-target="${s.target}">0</div>
                            <p>${s.label}</p>
                        </div>
                    </div>
                `);
            });
        }

        // Button click handlers
        $('#register-btn').on('click', function() {
            window.location.href = 'signup.html';
        });

        $('#contact-btn').on('click', function() {
            alert('Contact: +94 11 234 5678 or info@ndi.gov.lk');
        });

        // fade-in effect
        function checkVisible() {
            $('.fade-in').each(function () {
                const elementTop = $(this).offset().top;
                const viewportBottom = $(window).scrollTop() + $(window).height();

                if (viewportBottom > elementTop + 50) {
                    $(this).addClass('visible');
                }
            });
        }

        $(window).on('scroll', checkVisible);
        checkVisible();

        function animateCounter(element) {
            const target = parseInt($(element).attr('data-target'));
            const duration = 2000;
            const steps = 60;
            const increment = target / steps;
            let current = 0;

            const timer = setInterval(() => {
                current += increment;

                if (current >= target) {
                    $(element).text(target);
                    clearInterval(timer);
                } else {
                    $(element).text(Math.floor(current));
                }
            }, duration / steps);
        }

        let countersTriggered = false;

        $(window).on("scroll", function () {
            const statsSection = $('.stats-section');
            if (statsSection.length === 0) return;
            
            const statsTop = statsSection.offset().top;
            const viewportBottom = $(window).scrollTop() + $(window).height();

            if (!countersTriggered && viewportBottom > statsTop) {
                $(".counter").each(function () {
                    animateCounter(this);
                });
                countersTriggered = true;
            }
        });
        
    </script>
</body>
</html>